# Deployment Guide

This guide covers deploying TaskFlow Lite to Heroku.

## Prerequisites

1. Heroku account (free tier works fine)
2. Heroku CLI installed: https://devcenter.heroku.com/articles/heroku-cli
3. Git installed
4. Code committed to git repository

## Quick Deploy

```bash
# 1. Login to Heroku
heroku login

# 2. Create a new Heroku app (replace 'your-app-name' with your desired name)
heroku create your-app-name

# 3. Verify remote was added
git remote -v

# 4. Push code to Heroku
git push heroku main

# 5. Open your app
heroku open
```

That's it! Heroku will automatically:
- Detect it's a Rails app
- Install dependencies
- Run database migrations (via Procfile release phase)
- Start the web server

## Manual Steps (if needed)

### Run Database Migrations Manually
```bash
heroku run rails db:migrate
```

### Seed the Database (Optional)
```bash
heroku run rails db:seed
```

### View Logs
```bash
heroku logs --tail
```

### Open Rails Console on Heroku
```bash
heroku run rails console
```

## Environment Configuration

The app automatically uses Heroku's environment:
- `DATABASE_URL` - Automatically set by Heroku PostgreSQL addon
- `RAILS_ENV` - Automatically set to 'production'
- `SECRET_KEY_BASE` - Automatically generated by Heroku

No additional environment variables needed!

## Database

Heroku automatically provisions a free PostgreSQL database when you deploy a Rails app. No manual setup required.

To check your database:
```bash
heroku pg:info
```

## Scaling (Optional)

The free tier includes one web dyno. To scale:
```bash
# Scale up
heroku ps:scale web=2

# Scale down
heroku ps:scale web=1
```

## Custom Domain (Optional)

```bash
heroku domains:add www.yourdomain.com
```

## Troubleshooting

### App not loading?
```bash
heroku logs --tail
```

### Database issues?
```bash
heroku run rails db:migrate
heroku pg:info
```

### Need to reset database?
```bash
heroku pg:reset DATABASE_URL
heroku run rails db:migrate
heroku run rails db:seed
```

## Costs

With the default configuration:
- **Eco Dyno Plan**: $5/month (required for production apps)
- **PostgreSQL**: Free tier (10,000 rows)

For a simple task app, the free database tier is sufficient.

## Continuous Deployment

Every time you push to Heroku, it will:
1. Build the app
2. Run migrations (via release phase)
3. Deploy new version
4. Zero-downtime deployment

```bash
git add .
git commit -m "Update feature"
git push heroku main
```

## Monitoring

View app metrics:
```bash
heroku logs --tail
heroku ps
heroku pg:info
```

## Backup (Production Best Practice)

```bash
# Create manual backup
heroku pg:backups:capture

# List backups
heroku pg:backups

# Restore from backup
heroku pg:backups:restore
```

## Questions?

See Heroku documentation:
- Rails Guide: https://devcenter.heroku.com/articles/getting-started-with-rails8
- PostgreSQL: https://devcenter.heroku.com/articles/heroku-postgresql
